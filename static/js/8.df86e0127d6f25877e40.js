webpackJsonp([8],{"37us":function(t,e){},"44fU":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o("Gu7T"),i=o.n(s),a=(o("6yB+"),o("pC7o")),n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"headerspecial"},[s("yd-navbar",{attrs:{title:t.userInfo.stationName+":"+t.userInfo.userName,fixed:""}},[null!=t.stationinfo&&null!=t.stationinfo.posNo?s("div",{staticStyle:{"margin-left":"2px",color:"#fff","font-size":"12px","font-family":"PingFangSC-Medium"},attrs:{slot:"left"},slot:"left"},[t._v("\n      POS编号:"+t._s(t.stationinfo.posNo)+"\n    ")]):t._e(),t._v(" "),s("div",{attrs:{slot:"right"},slot:"right"},[s("router-link",{attrs:{to:"/indexV2"}},[1==t.isShowHome?s("img",{staticStyle:{"margin-right":"10px","margin-top":"-5px"},attrs:{src:o("t7aW"),width:"20",height:"20"}}):t._e()])],1)]),t._v(" "),null==t.isUserInfo||t.isUserInfo?s("div",{staticClass:"index-header"},[s("ul",{staticClass:"header-content"},[s("li",{staticClass:"h-content-left"},[s("img",{staticStyle:{"margin-top":"-2px"},attrs:{src:o("nMCy"),width:"20",height:"20"}}),t._v(" "),s("span",{attrs:{slot:"left"},slot:"left"},[t._v("加油人员:")]),t._v(" "),s("button",{staticClass:"placeSelect",attrs:{href:"javascript:void(0)",type:"button"},on:{click:function(e){return e.stopPropagation(),t.selectpeople(e)}}},[t._v("\n          "+t._s(t.specialName)+"\n          ")])]),t._v(" "),s("li",{staticClass:"h-content-right"},[s("span",[t._v("班次:")]),t._v(" "),s("span",[t._v(t._s(t.userInfo.dateWorkNo))])])]),t._v(" "),s("div",{staticStyle:{clear:"both"}}),t._v(" "),s("actionsheet",{directives:[{name:"show",rawName:"v-show",value:t.showSheet,expression:"showSheet"}],attrs:{menus:t.menus3,clickMusic:"true","show-cancel":""},on:{"on-click-menu-delete":t.onDelete},model:{value:t.show3,callback:function(e){t.show3=e},expression:"show3"}})],1):t._e(),t._v(" "),s("yd-popup",{attrs:{position:"center",width:"90%","close-on-masker":!1},model:{value:t.show1,callback:function(e){t.show1=e},expression:"show1"}},[s("div",{staticStyle:{"background-color":"#fff"}},[s("div",{staticStyle:{"padding-left":"12px",top:"0",width:"100%",left:"0","z-index":"999",padding:"1px 1px 9px 12px",background:"#fff"}},[s("span",{staticClass:"switch_cashier_header"},[t._v(" 请选择所需要查看的加油员 ")])]),t._v(" "),s("section",{staticStyle:{padding:"5px 10px 5px 10px","overflow-y":"auto"},style:"max-height:"+(t.clientHeight-80)+"px"},t._l(t.listData,function(e,o){return s("yd-checklist",{key:o,ref:"checklistDemo",refInFor:!0,attrs:{callback:t.change,clickMusic:"true"},model:{value:t.checklist3,callback:function(e){t.checklist3=e},expression:"checklist3"}},[s("yd-checklist-item",{attrs:{val:e.operatorId}},[s("div",{staticStyle:{height:"50px","line-height":"50px","font-size":"1rem"}},[t._v(t._s(e.cardName))])])],1)}),1),t._v(" "),s("p",{staticStyle:{"text-align":"center",height:"40px","line-height":"40px",position:"fixed",bottom:"0",left:"0",width:"100%","z-index":"999",background:"#fff"}},[s("yd-button",{staticClass:"switch_cashier_button",staticStyle:{padding:"0 35px",width:"25%"},nativeOn:{click:function(e){t.show1=!1}}},[t._v("取消")])],1)])])],1)},staticRenderFns:[]};var r=function(t){o("37us")},c=o("VU/8")(a.a,n,!1,r,null,null).exports,l=o("Bfwr"),u=(l.a,{data:function(){return{topinfo:{title:""},oilRecords:[],result:!1,showLoading:!1,loadingText:"",paytimeout:120,alipaytimer:120,alipayCatchtime:120,wxpayCatchtime:120,intervaltime:0,reciveList:[],recivedId:"",wxmoney:"",alipaymoney:"",clientHeight:document.documentElement.clientHeight}},mounted:function(){this.topinfo.title=this.$store.state.POS_province,window.history&&window.history.pushState&&(history.pushState(null,null,document.URL),window.addEventListener("popstate",this.onBrowserBack,!1)),this.showLoading=!0,this.getOrderList(),console.log("document.documentElement.clientHeight",document.documentElement.clientHeight)},destroyed:function(){window.removeEventListener("popstate",this.onBrowserBack,!1)},methods:{onBrowserBack:function(){this.$router.push("/indexV2")},closeMain:function(t,e){console.log("子组件接收的参数"),null==t||0==t.length?this.oilRecords=null:this.oilRecords=t,this.recivedId=e},loadList:function(){var t=this;this.$http.get("/store/json/refuel_pos/refresh_record",{operatorId:this.recivedId.toString()}).then(function(e){if("success"===e.result){t.showLoading=!1,t.result=!0;var o=e.data;t.oilRecords=o,t.$refs.pullrefreshDemo.$emit("ydui.pullrefresh.finishLoad")}else console.log(e),e.status,t.$dialog.alert({mes:e.info});t.showLoading=!1}).catch(function(e){t.showLoading=!1,console.log(e)})},getRecordList:function(){this.showLoading=!0,this.clickButton(),this.incrementRefreshRecord("")},getOrderList:function(){var t=this;this.$nextTick(function(){setTimeout(function(){t.$http.get("/store/json/refuel_pos/refresh_record",{operatorId:""}).then(function(e){"success"===e.result?(t.showLoading=!1,t.result=!0,t.oilRecords=e.data):(e.status,t.$dialog.alert({mes:e.info})),t.showLoading=!1}).catch(function(e){t.showLoading=!1,console.log(e)})},500)})},incrementRefreshRecord:function(t){var e=this,o="";null==this.oilRecords||0==this.oilRecords.length?t="":(t=this.oilRecords[0].id,o=this.oilRecords[this.oilRecords.length-1].id),this.$http.get("/store/json/refuel_pos/incrementRefreshRecord",{recordMaxId:t,recordMinId:o,operatorId:this.recivedId.toString()}).then(function(t){if(console.log(t),"success"===t.result){var o=t.data;if(o){var s=o.addRecord;t.data.removeIds.forEach(function(t){e.oilRecords.forEach(function(o,s){t==o.id&&(e.oilRecords.splice(s,1),e.oilRecords.length>50&&e.oilRecords.splice(50,e.oilRecords.length))})}),e.oilRecords=[].concat(i()(s),i()(e.oilRecords))}}e.showLoading=!1}).catch(function(t){e.showLoading=!1,console.log(t)})},submit:function(t,e){var o=this;console.log("item",t.amount),this.wexinamount=t.amount,this.clickButton(),this.showLoading=!0;this.$localStorage.getStorage("deviceInfo");this.$http.get("/store/json/refuel_pos/createBill",{"gasStationSaleOrder.redisId":t.id,"gasStationSaleOrder.posNum":1,"gasStationSaleOrder.recAmount":t.amount,"gasStationSaleOrder.disAmount":"0.00","gasStationSaleOrder.price":t.price,"gasStationSaleOrder.skuName":t.tankOilName,"gasStationSaleOrder.skus":t.tankOilNo+":"+t.liter}).then(function(s){if("success"===s.result){var i={id:t.id,orderId:s.data.orderId,gunNo:t.gunNo,tankOilName:t.tankOilName,cardOwner:t.cardOwner,cardNo:t.cardNo,getTimeStr:t.getTimeStr,liter:t.liter,amount:t.amount};if(!s.data.orderId)return void o.$dialog.alert({mes:"账单锁定失败，createBill 返回orderId为："+s.data.orderId});o.$localStorage.setStorage("weorder",s.data),o.$store.commit("setOilInfo",i);var a=t.cardNo.substring(t.cardNo.length-6,t.cardNo.length),n=t.cardOwner+"("+a+")";switch(e){case 0:o.$router.replace({path:"/order/submitOrder",query:{id:t.id,orderId:s.data.orderId}});break;case 1:case 2:o.payment(e,n,t.amount,s.data.orderId,t.id);break;case 4:o.orderpay(e,n,t.amount,s.data.orderId,t.id)}}else o.$dialog.alert({mes:s.info});o.showLoading=!1,console.log(s)}).catch(function(t){o.showLoading=!1,console.log(t)})},orderpay:function(t,e,o){var s=this;this.showLoading=!0;this.$localStorage.getStorage("deviceInfo");this.$http.get("/store/json/refuel_pos/payByCash",{"gasStationSaleOrder.orderId":e}).then(function(i){if("success"===i.result){var a=i.data,n=a.recAmount,r=a.nrecAmount,c=a.disAmount,l=a.payAmount,u=(a.chaAmount,a.orderTime),d=a.tradeNo;s.$dialog.alert({mes:"支付成功",callback:function(){s.$router.replace({path:"/order/customer1",query:{id:o,orderId:e,payType:t,recAmount:n,nrecAmount:r,disAmount:c,payAmount:l,orderTime:u,tradeNo:d}})}})}else s.$dialog.alert({mes:null===i.info?"网络繁忙，请稍后再试！":i.info});s.showLoading=!1,console.log(i)}).catch(function(t){s.$dialog.alert({mes:null===response.info?"网络繁忙，请稍后再试！":response.info}),console.log(t),s.showLoading=!1})},payment:function(t,e,o,s,i){var a=this;switch(t){case 1:this.$bridge.qrscan(e,"收款金额:"+o,function(e){a.wxpay(e,t,s,i)});break;case 2:this.$bridge.qrscan(e,"收款金额:"+o,function(e){a.alipay(e,t,s,i)})}},wxpay:function(t,e,o,s){var i=this;window.history&&window.history.pushState&&(history.pushState(null,null,document.URL),window.addEventListener("popstate",function(){history.pushState(null,null,document.URL)},!1)),this.loadingText="正在支付...";this.$localStorage.getStorage("deviceInfo");this.showLoading=!0,this.$http.get("/store/json/refuel_pos/payByWeixin",{"gasStationSaleOrder.orderId":o,"gasStationSaleOrder.authCode":t,"gasStationSaleOrder.payAmount":this.wexinamount}).then(function(a){if("success"===a.result)if("pay"===a.data.payStatus){i.showLoading=!1;var n=a.data,r=n.recAmount,c=n.nrecAmount,l=n.disAmount,u=(n.payAmount,n.chaAmount,n.orderTime),d=n.tradeNo;i.gasStationSalePayListtransform=n.gasStationSalePayList,i.$localStorage.setStorage("gasStationSalePayListtransform",i.gasStationSalePayListtransform),i.$router.replace({path:"/order/customer1",query:{id:s,orderId:o,recAmount:r,nrecAmount:c,disAmount:l,payType:e,orderTime:u,tradeNo:d}})}else"nopay"===a.data.payStatus&&i.checkWeixinResult(t,e,o,s);else window.removeEventListener("popstate",function(){history.pushState(null,null,document.URL)},!1),i.showLoading=!1,i.$dialog.alert({mes:null===a.info?"支付失败，请联系管理员！":a.info})}).catch(function(a){i.checkWeixinResult(t,e,o,s),console.log(a)})},alipay:function(t,e,o,s){var i=this;window.history&&window.history.pushState&&(history.pushState(null,null,document.URL),window.addEventListener("popstate",function(){history.pushState(null,null,document.URL)},!1)),this.loadingText="正在支付...";this.$localStorage.getStorage("deviceInfo");this.showLoading=!0,this.$http.get("/store/json/refuel_pos/payByAlipay",{"gasStationSaleOrder.orderId":o,"gasStationSaleOrder.authCode":t,"gasStationSaleOrder.payAmount":this.wexinamount}).then(function(a){if("success"===a.result)if("pay"===a.data.payStatus){i.showLoading=!1;var n=a.data,r=n.recAmount,c=n.nrecAmount,l=n.disAmount,u=(n.payAmount,n.chaAmount,n.orderTime),d=n.tradeNo;i.gasStationSalePayListtransform=n.gasStationSalePayList,i.$localStorage.setStorage("gasStationSalePayListtransform",i.gasStationSalePayListtransform),i.$router.replace({path:"/order/customer1",query:{id:s,orderId:o,recAmount:r,nrecAmount:c,disAmount:l,payType:e,orderTime:u,tradeNo:d}})}else"nopay"===a.data.payStatus&&i.checkAlipayResult(t,e,o,s);else window.removeEventListener("popstate",function(){history.pushState(null,null,document.URL)},!1),i.showLoading=!1,i.$dialog.alert({mes:null===a.info?"支付失败！":a.info})}).catch(function(a){i.checkAlipayResult(t,e,o,s),console.log(a)})},checkAlipayResult:function(t,e,o,s){var i=this;this.$http.get("/store/json/refuel_pos/checkAlipayResult",{"gasStationSaleOrder.orderId":o,"gasStationSaleOrder.authCode":t}).then(function(a){if("success"===a.result&&null!=a.data)if("pay"===a.data.payStatus){i.showLoading=!1;var n=a.data,r=n.recAmount,c=n.nrecAmount,l=n.disAmount,u=(n.payAmount,n.chaAmount,n.orderTime),d=n.tradeNo;i.gasStationSalePayListtransform=n.gasStationSalePayList,i.$localStorage.setStorage("gasStationSalePayListtransform",i.gasStationSalePayListtransform),i.$router.replace({path:"/order/customer1",query:{id:s,orderId:o,recAmount:r,nrecAmount:c,disAmount:l,payType:e,orderTime:u,tradeNo:d}})}else"nopay"===a.data.payStatus&&i.alipaytimer>0?setTimeout(function(){i.alipaytimer--,i.checkAlipayResult(t,e,o,s)},1e3):0===i.alipaytimer&&(window.removeEventListener("popstate",function(){history.pushState(null,null,document.URL)},!1),i.showLoading=!1,i.$dialog.alert({mes:"支付超时，请重新支付"}));else window.removeEventListener("popstate",function(){history.pushState(null,null,document.URL)},!1),i.showLoading=!1,i.$dialog.alert({mes:null===a.info?"系统繁忙，请稍后再试!":a.info});console.log(a)}).catch(function(a){var n=i;n&&!n._isDestroyed&&n.alipayCatchtime>0&&setTimeout(function(){n.alipayCatchtime--,i.checkAlipayResult(t,e,o,s)},1e3),i.$dialog.alert({mes:"系统错误!"}),console.log(a)})},checkWeixinResult:function(t,e,o,s){var i=this;this.$http.get("/store/json/refuel_pos/checkWeixinResult",{"gasStationSaleOrder.orderId":o,"gasStationSaleOrder.authCode":t}).then(function(a){if("success"===a.result&&null!=a.data)if("pay"===a.data.payStatus){i.showLoading=!1;var n=a.data,r=n.recAmount,c=n.nrecAmount,l=n.disAmount,u=(n.payAmount,n.chaAmount,n.orderTime),d=n.tradeNo;i.gasStationSalePayListtransform=n.gasStationSalePayList,i.$localStorage.setStorage("gasStationSalePayListtransform",i.gasStationSalePayListtransform),i.$router.replace({path:"/order/customer1",query:{id:s,orderId:o,recAmount:r,nrecAmount:c,disAmount:l,payType:e,orderTime:u,tradeNo:d}})}else"nopay"===a.data.payStatus&&i.paytimeout>0?setTimeout(function(){i.paytimeout--,i.checkWeixinResult(t,e,o,s)},1e3):0===i.paytimeout&&(i.showLoading=!1,i.$dialog.alert({mes:"支付超时，请重新支付"}));else window.removeEventListener("popstate",function(){history.pushState(null,null,document.URL)},!1),i.showLoading=!1,i.$dialog.alert({mes:null===a.info?"系统繁忙，请稍后再试!":a.info});console.log(a)}).catch(function(a){var n=i;n&&!n._isDestroyed&&n.wxpayCatchtime>0&&setTimeout(function(){n.wxpayCatchtime--,i.checkWeixinResult(t,e,o,s)},1e3),i.$dialog.alert({mes:"系统错误!"}),console.log(a)})}},components:{headerspecial:c,loading:l.a},filters:{substr:function(t){return t?t.substring(t.length-6,t.length):""}}}),d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"selectOrder2"},[s("headerspecial",{attrs:{title:t.topinfo.title,isShowHome:!0},on:{closeMain:t.closeMain}}),t._v(" "),s("div",{staticClass:"step"},[s("ul",[s("li",{staticClass:"selected"},[t._v("1.加油")]),t._v(" "),t._m(0),t._v(" "),s("li",[t._v("2.收银")]),t._v(" "),t._m(1),t._v(" "),s("li",[t._v("3.识别")]),t._v(" "),t._m(2),t._v(" "),s("li",[t._v("4.开票")]),t._v(" "),s("li",[s("div",{staticClass:"getrecordbtn",staticStyle:{"text-align":"right"},attrs:{clickMusic:"true"},on:{click:t.getRecordList}},[s("span",[t._v("刷新加油记录")])])]),t._v(" "),s("div",{staticClass:"clear"})])]),t._v(" "),1==t.result?s("div",{staticClass:"orderlist"},[s("yd-backtop"),t._v(" "),s("yd-pullrefresh",{ref:"pullrefreshDemo",attrs:{callback:t.loadList,"show-init-tip":!0}},[s("ul",t._l(t.oilRecords,function(e,i){return s("li",{key:i},[s("div",{staticClass:"list-left"},[s("p",{staticClass:"gunno"},[t._v(t._s(e.gunNo)+"#")]),t._v(" "),s("span",{staticClass:"gasName"},[t._v(t._s(e.tankOilName))])]),t._v(" "),s("div",{staticClass:"list-right"},[s("p",{staticClass:"username"},[s("span",{staticStyle:{"margin-right":"5px","font-size":"22px",color:"#333"}},[t._v(t._s(e.cardOwner))]),t._v("\n              ("+t._s(t._f("substr")(e.cardNo))+")\n            ")]),t._v(" "),s("div",{staticClass:"oildata",staticStyle:{"line-height":"30px"}},[s("div",{staticClass:"moneybox",staticStyle:{"margin-right":"10px"}},[s("span",{staticClass:"data-value",staticStyle:{"font-size":"18px","font-weight":"800"}},[t._v("\n                  "+t._s(e.amount)+"\n                  "),s("span",{staticStyle:{"font-size":"14px"}},[t._v("元")])])]),t._v(" "),s("div",{staticClass:"litrebox"},[s("span",{staticClass:"data-value",staticStyle:{color:"#000","font-size":"14px","font-family":"PingFangSC-Medium"}},[t._v(t._s(e.liter)+"L")])]),t._v(" "),s("div",{staticClass:"clear"})]),t._v(" "),s("p",{staticClass:"oiltime"},[t._v(t._s(e.getTimeStr))])]),t._v(" "),s("div",{staticClass:"clear"}),t._v(" "),s("div",{staticClass:"paytype"},[s("ul",{staticClass:"typelist"},[s("li",{attrs:{clickMusic:"true"},on:{click:function(o){return t.submit(e,1)}}},[s("img",{attrs:{src:o("xYjW"),width:"30",height:"30"}}),t._v(" "),s("span",{staticClass:"paytype-name"},[t._v("微信支付")])]),t._v(" "),s("li",{attrs:{clickMusic:"true"},on:{click:function(o){return t.submit(e,2)}}},[s("img",{attrs:{src:o("9O5e"),width:"30",height:"30"}}),t._v(" "),s("span",{staticClass:"paytype-name"},[t._v("支付宝")])]),t._v(" "),s("li",{attrs:{clickMusic:"true"}},[s("span",{staticClass:"paytype-name moretype",attrs:{clickMusic:"true"},on:{click:function(o){return t.submit(e,0)}}},[t._v("更多>")])]),t._v(" "),s("div",{staticClass:"clear"})])]),t._v(" "),s("div",{staticClass:"clear"})])}),0)])],1):t._e(),t._v(" "),null==t.oilRecords?s("div",{staticClass:"nullnode"},[s("div",[t._v("暂无加油记录")])]):t._e(),t._v(" "),s("loading",{attrs:{show:t.showLoading,text:t.loadingText}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("img",{attrs:{src:o("+y+B"),width:"15",height:"15"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("img",{attrs:{src:o("+y+B"),width:"15",height:"15"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("img",{attrs:{src:o("+y+B"),width:"15",height:"15"}})])}]};var _=o("VU/8")(u,d,!1,function(t){o("SkIL")},null,null);e.default=_.exports},"6yB+":function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_vuex__=__webpack_require__("NYxO"),__WEBPACK_IMPORTED_MODULE_1_vux_src_directives_transfer_dom_index_js__=__webpack_require__("63CM"),__WEBPACK_IMPORTED_MODULE_2_vux_src_components_actionsheet_index_vue__=__webpack_require__("Msp2"),__WEBPACK_IMPORTED_MODULE_3_vux_src_components_group_index_vue__=__webpack_require__("rHil"),__WEBPACK_IMPORTED_MODULE_4_vux_src_components_x_switch_index_vue__=__webpack_require__("aTeQ"),__WEBPACK_IMPORTED_MODULE_5_vux_src_components_toast_index_vue__=__webpack_require__("rLAy"),_unused_webpack_default_export={name:"headerspecial",props:["title","isShowSignup","isShowLeft","isShowRight","callback","transition","isUserInfo","isShowHome"],components:{Actionsheet:__WEBPACK_IMPORTED_MODULE_2_vux_src_components_actionsheet_index_vue__.a,Group:__WEBPACK_IMPORTED_MODULE_3_vux_src_components_group_index_vue__.a,XSwitch:__WEBPACK_IMPORTED_MODULE_4_vux_src_components_x_switch_index_vue__.a,Toast:__WEBPACK_IMPORTED_MODULE_5_vux_src_components_toast_index_vue__.a},directives:{TransferDom:__WEBPACK_IMPORTED_MODULE_1_vux_src_directives_transfer_dom_index_js__.a},data:function(){return{userInfo:{},show3:!1,menus3:{2:"退出登录"},showSuccess:!1,showSheet:!1,stationinfo:{},show1:!1,checklist3:[],isCheckAll:!1,listData:[],allpeople:"",specialName:"全部",flagchange:!0,clientHeight:document.documentElement.clientHeight}},created:function(){this.getUserInfo()},methods:{onDelete:function(){this.showSuccess=!0},getUserInfo:function getUserInfo(){var _this=this;this.stationinfo=this.$localStorage.getStorage("stationinfo");var data=this.$localStorage.getStorage("logininfo");data=eval("("+data+")"),this.userInfo=data,setTimeout(function(){_this.getUserInfo()},1e3)},signout:function(){this.showSheet=!0,this.show3=!0},signup:function(){var t=this;this.$dialog.confirm({title:'<div style="text-align: center;">提示</div>',mes:'<div style="text-align: center;">确定要退出当前登录吗？</div>',opts:[{txt:"取消",color:!1,callback:function(){}},{txt:"确定",color:!0,callback:function(){t.$localStorage.removeStorage("logininfo"),t.$router.push("/loginV2")}}]})},bind:function(t){this.$router.isBack=!0;var e=this.fallback;"function"==typeof t?this.callback(e):e()},fallback:function(){this.$router.go(-1)},selectpeople:function(){this.clickButton(),this.getpeopleData()},change:function(t,e){this.flagchange&&(this.flagchange=!1,this.incrementRefreshRecord(this.checklist3))},getpeopleData:function(){var t=this;0==this.listData.length?this.$http.post("/store/json/refuel_pos/getCurrentOperators").then(function(e){"success"==e.result?e.data.length>0?(t.listData=e.data,t.getListArr=t.listData.unshift({cardName:"全部",operatorId:"all"}),t.show1=!0):(t.listData=[],t.$dialog.alert({mes:"没有数据"})):t.$dialog.alert({mes:e.info})}).catch(function(t){console.log(t)}):this.show1=!0},incrementRefreshRecord:function(t){for(var e=this,o=null,s=0;s<this.listData.length;s++)this.listData[s].operatorId==t.toString()&&(o=this.listData[s]);if(console.log(o),null==o)return this.$dialog.alert({mes:"数据异常"}),void(this.show1=!1);"all"==t?(this.show1=!1,this.$http.get("/store/json/refuel_pos/refresh_record",{operatorId:""}).then(function(o){"success"==o.result?(e.flagchange=!0,e.$emit("closeMain",o.data,t),e.specialName="全部"):(e.flagchange=!0,e.specialName="全部",e.$dialog.alert({mes:o.info}))}).catch(function(t){e.specialName="全部",console.log(t)})):(this.show1=!1,this.specialName=o.cardName,console.log("this.specialName"+this.specialName),this.$http.get("/store/json/refuel_pos/refresh_record",{operatorId:t.toString()}).then(function(o){"success"==o.result?(e.flagchange=!0,e.$emit("closeMain",o.data,t)):(e.flagchange=!0,e.$dialog.alert({mes:o.info}))}).catch(function(t){console.log(t)}))}}}},SkIL:function(t,e){},pC7o:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_vuex__=__webpack_require__("NYxO"),__WEBPACK_IMPORTED_MODULE_1_vux_src_directives_transfer_dom_index_js__=__webpack_require__("63CM"),__WEBPACK_IMPORTED_MODULE_2_vux_src_components_actionsheet_index_vue__=__webpack_require__("Msp2"),__WEBPACK_IMPORTED_MODULE_3_vux_src_components_group_index_vue__=__webpack_require__("rHil"),__WEBPACK_IMPORTED_MODULE_4_vux_src_components_x_switch_index_vue__=__webpack_require__("aTeQ"),__WEBPACK_IMPORTED_MODULE_5_vux_src_components_toast_index_vue__=__webpack_require__("rLAy");__webpack_exports__.a={name:"headerspecial",props:["title","isShowSignup","isShowLeft","isShowRight","callback","transition","isUserInfo","isShowHome"],components:{Actionsheet:__WEBPACK_IMPORTED_MODULE_2_vux_src_components_actionsheet_index_vue__.a,Group:__WEBPACK_IMPORTED_MODULE_3_vux_src_components_group_index_vue__.a,XSwitch:__WEBPACK_IMPORTED_MODULE_4_vux_src_components_x_switch_index_vue__.a,Toast:__WEBPACK_IMPORTED_MODULE_5_vux_src_components_toast_index_vue__.a},directives:{TransferDom:__WEBPACK_IMPORTED_MODULE_1_vux_src_directives_transfer_dom_index_js__.a},data:function(){return{userInfo:{},show3:!1,menus3:{2:"退出登录"},showSuccess:!1,showSheet:!1,stationinfo:{},show1:!1,checklist3:[],isCheckAll:!1,listData:[],allpeople:"",specialName:"全部",flagchange:!0,clientHeight:document.documentElement.clientHeight}},created:function(){this.getUserInfo()},methods:{onDelete:function(){this.showSuccess=!0},getUserInfo:function getUserInfo(){var _this=this;this.stationinfo=this.$localStorage.getStorage("stationinfo");var data=this.$localStorage.getStorage("logininfo");data=eval("("+data+")"),this.userInfo=data,setTimeout(function(){_this.getUserInfo()},1e3)},signout:function(){this.showSheet=!0,this.show3=!0},signup:function(){var t=this;this.$dialog.confirm({title:'<div style="text-align: center;">提示</div>',mes:'<div style="text-align: center;">确定要退出当前登录吗？</div>',opts:[{txt:"取消",color:!1,callback:function(){}},{txt:"确定",color:!0,callback:function(){t.$localStorage.removeStorage("logininfo"),t.$router.push("/loginV2")}}]})},bind:function(t){this.$router.isBack=!0;var e=this.fallback;"function"==typeof t?this.callback(e):e()},fallback:function(){this.$router.go(-1)},selectpeople:function(){this.clickButton(),this.getpeopleData()},change:function(t,e){this.flagchange&&(this.flagchange=!1,this.incrementRefreshRecord(this.checklist3))},getpeopleData:function(){var t=this;0==this.listData.length?this.$http.post("/store/json/refuel_pos/getCurrentOperators").then(function(e){"success"==e.result?e.data.length>0?(t.listData=e.data,t.getListArr=t.listData.unshift({cardName:"全部",operatorId:"all"}),t.show1=!0):(t.listData=[],t.$dialog.alert({mes:"没有数据"})):t.$dialog.alert({mes:e.info})}).catch(function(t){console.log(t)}):this.show1=!0},incrementRefreshRecord:function(t){for(var e=this,o=null,s=0;s<this.listData.length;s++)this.listData[s].operatorId==t.toString()&&(o=this.listData[s]);if(console.log(o),null==o)return this.$dialog.alert({mes:"数据异常"}),void(this.show1=!1);"all"==t?(this.show1=!1,this.$http.get("/store/json/refuel_pos/refresh_record",{operatorId:""}).then(function(o){"success"==o.result?(e.flagchange=!0,e.$emit("closeMain",o.data,t),e.specialName="全部"):(e.flagchange=!0,e.specialName="全部",e.$dialog.alert({mes:o.info}))}).catch(function(t){e.specialName="全部",console.log(t)})):(this.show1=!1,this.specialName=o.cardName,console.log("this.specialName"+this.specialName),this.$http.get("/store/json/refuel_pos/refresh_record",{operatorId:t.toString()}).then(function(o){"success"==o.result?(e.flagchange=!0,e.$emit("closeMain",o.data,t)):(e.flagchange=!0,e.$dialog.alert({mes:o.info}))}).catch(function(t){console.log(t)}))}}}}});