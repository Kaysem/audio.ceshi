webpackJsonp([17],{oFw7:function(t,s){},qyyw:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=i("Mitt"),o=i("Bfwr"),a=(e.a,o.a,{data:function(){return{topinfo:{title:"加油河南工作台"},oilRecords:[],result:!1,showLoading:!1,loadingText:"",paytimeout:120,alipaytimer:120,alipayCatchtime:120,wxpayCatchtime:120,intervaltime:0,reciveList:[],recivedId:"",wxmoney:"",alipaymoney:""}},mounted:function(){window.history&&window.history.pushState&&(history.pushState(null,null,document.URL),window.addEventListener("popstate",this.onBrowserBack,!1)),this.showLoading=!0,this.getOrderList()},destroyed:function(){window.removeEventListener("popstate",this.onBrowserBack,!1)},methods:{onBrowserBack:function(){this.$router.push("/indexV2")},closeMain:function(t,s){console.log("子组件接收的参数"),null==t||0==t.length?this.oilRecords=null:this.oilRecords=t,this.recivedId=s},loadList:function(){var t=this;this.$http.get("/store/json/refuel_pos/queryUnRecICRecord").then(function(s){if("success"===s.result){t.showLoading=!1,t.result=!0;var i=s.data;t.oilRecords=i,t.$refs.pullrefreshDemo.$emit("ydui.pullrefresh.finishLoad")}else console.log(s),s.status,t.$dialog.alert({mes:s.info});t.showLoading=!1}).catch(function(s){t.showLoading=!1,console.log(s)})},getRecordList:function(){this.showLoading=!0,this.clickButton(),this.getOrderList()},getOrderList:function(){var t=this;this.$nextTick(function(){setTimeout(function(){t.$http.get("/store/json/refuel_pos/queryUnRecICRecord ").then(function(s){"success"===s.result?(t.result=!0,t.oilRecords=s.data,t.showLoading=!1):(s.status,t.$dialog.alert({mes:s.info})),t.showLoading=!1}).catch(function(s){t.showLoading=!1,console.log(s)})},500)})},submit:function(t){var s=this;this.$dialog.confirm({title:'<div style="text-align: center;">提示</div>',mes:'<div style="text-align: center;">是否进行此操作</div>',opts:[{txt:"否",color:!1,callback:function(){console.log("取消")}},{txt:"是",color:!0,callback:function(){s.showLoading=!0,s.stationinfo=s.$localStorage.getStorage("stationinfo"),s.$http.get("/store/json/refuel_pos/bandRecordForUser",{"gasStationSaleOrder.orderId":t.order_id,"gasStationSaleOrder.posNum":s.stationinfo.posNo}).then(function(t){"success"===t.result?s.getOrderList():s.$dialog.alert({mes:t.info}),s.showLoading=!1,console.log(t)}).catch(function(t){s.showLoading=!1,console.log(t)})}}]})}},components:{vheader:e.a,loading:o.a},filters:{substr:function(t){return t?t.substring(t.length-6,t.length):""}}}),n={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"selectOrderCash"},[i("vheader",{attrs:{title:t.topinfo.title,isShowHome:!0},on:{closeMain:t.closeMain}}),t._v(" "),i("div",{staticClass:"step"},[i("ul",[i("li",[i("div",{staticClass:"getrecordbtn",staticStyle:{"text-align":"right"},attrs:{clickMusic:"true"},on:{click:t.getRecordList}},[i("span",[t._v("刷新加油记录")])])]),t._v(" "),i("div",{staticClass:"clear"})])]),t._v(" "),1==t.result?i("div",{staticClass:"orderlist"},[i("yd-backtop"),t._v(" "),i("yd-pullrefresh",{ref:"pullrefreshDemo",attrs:{callback:t.loadList,"show-init-tip":!0}},[i("ul",t._l(t.oilRecords,function(s,e){return i("li",{key:e},[i("div",{staticClass:"list-left"},[i("p",{staticClass:"gunno"},[t._v(t._s(s.gunNo)+"#")]),t._v(" "),i("span",{staticClass:"gasName"},[t._v(t._s(s.tankOilName))])]),t._v(" "),i("div",{staticClass:"list-right"},[i("p",{staticClass:"username"},[i("span",{staticStyle:{"margin-right":"5px","font-size":"22px",color:"#333"}},[t._v(t._s(s.cardOwner))]),t._v("\n              ("+t._s(t._f("substr")(s.cardNo))+")\n            ")]),t._v(" "),i("div",{staticClass:"oildata",staticStyle:{"line-height":"30px"}},[i("div",{staticClass:"moneybox",staticStyle:{"margin-right":"10px"}},[i("span",{staticClass:"data-value",staticStyle:{"font-size":"18px","font-weight":"800"}},[t._v("\n                  "+t._s(s.amount)+"\n                  "),i("span",{staticStyle:{"font-size":"14px"}},[t._v("元")])])]),t._v(" "),i("div",{staticClass:"litrebox"},[i("span",{staticClass:"data-value",staticStyle:{color:"#000","font-size":"14px","font-family":"PingFangSC-Medium"}},[t._v(t._s(s.liter)+"L")])]),t._v(" "),i("div",{staticClass:"clear"})]),t._v(" "),i("p",{staticClass:"oiltime"},[t._v(t._s(s.getTimeStr))])]),t._v(" "),i("div",{staticClass:"clear"}),t._v(" "),i("div",{staticClass:"paytype"},[i("ul",{staticClass:"typelist"},[i("li",{attrs:{clickMusic:"true"},on:{click:function(i){return t.submit(s)}}},[i("span",{staticClass:"paytype-name"},[t._v("认领")])]),t._v(" "),i("div",{staticClass:"clear"})])]),t._v(" "),i("div",{staticClass:"clear"})])}),0)])],1):t._e(),t._v(" "),null==t.oilRecords?i("div",{staticClass:"nullnode"},[i("div",[t._v("暂无加油记录")])]):t._e(),t._v(" "),i("loading",{attrs:{show:t.showLoading,text:t.loadingText}})],1)},staticRenderFns:[]};var l=i("VU/8")(a,n,!1,function(t){i("oFw7")},null,null);s.default=l.exports}});