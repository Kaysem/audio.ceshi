webpackJsonp([13],{I4F6:function(t,e){},NJwM:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("Bfwr"),n=o("62KO"),s=o("Mitt"),a=(s.a,i.a,n.a,{data:function(){return{topinfo:{title:""},showLoading:!1,loadingText:"",paytimeout:60,oilRecord:{},loadResult:!1,payType:1,recAmount:0,nrecAmount:0,disAmount:0,phone:"",plateNum:"",payMethod:"",invoiceInfo:{},showConfirm2:!1,qrcode:""}},mounted:function(){this.topinfo.title=this.$store.state.POS_province,window.addEventListener("popstate",this.onBrowserBack,!1),this.$route.query.qrcode?this.getInvoiceInfo(this.$route.query.qrcode):this.$route.query.receipts_icked&&(this.invoiceInfo=this.$route.query.receipts_icked)},destroyed:function(){window.removeEventListener("popstate",this.onBrowserBack,!1)},methods:{editSan:function(){this.showConfirm2=!0},cancelConfirmDz:function(){this.showConfirm2=!1},disInvoice:function(){var t=this;this.$bridge.qrscan("","",function(e){t.getInvoiceInfo(e)})},onBrowserBack:function(){history.pushState(null,null,document.URL)},getInvoiceInfo:function(t){var e=this;this.showLoading=!0,this.qrcode=t,this.$http.get("/store/json/refuel_pos/getInvoiceMsg",{qrCodeText:this.qrcode}).then(function(t){console.log(t),"success"===t.result?e.invoiceInfo=t.data:e.$dialog.alert({mes:t.info}),e.showLoading=!1}).catch(function(t){e.showLoading=!1,console.log(t)})},printInvoice:function(){var t=this;this.$dialog.confirm({title:'<div style="text-align: center;">温馨提示</div>',mes:'<div style="text-align: center;">确定要开具纸质发票吗？</div>',opts:[{txt:"取消",color:!1,callback:function(){}},{txt:"确定",color:!0,callback:function(){t.showLoading=!0;var e=t.$route.query.orderId,o=t.$localStorage.getStorage("deviceInfo").posNo;t.$http.post("/store/json/refuel_pos/printInvoice",{"gasStationSaleOrder.orderId":e,"gasStationSaleOrder.posNum":o,"gasStationInvoice.type":1,"gasStationInvoice.titleType":t.invoiceInfo.titleType,"gasStationInvoice.title":t.invoiceInfo.title,"gasStationInvoice.orgTaxNo":t.invoiceInfo.orgTaxNo,"gasStationInvoice.userPhone":t.invoiceInfo.userPhone,"gasStationInvoice.companyAddress":t.invoiceInfo.companyAddress,"gasStationInvoice.openingBank":t.invoiceInfo.openingBank,"gasStationInvoice.bankAccount":t.invoiceInfo.bankAccount,"gasStationInvoice.userEmail":t.$refs.email.value}).then(function(e){"success"===e.result?t.$dialog.alert({mes:"开票成功",callback:function(){t.$router.replace("/orderv2/selectOrder")}}):t.$dialog.alert({mes:e.info}),t.showLoading=!1}).catch(function(e){t.$dialog.alert({mes:"系统繁忙，请稍后再试！"}),t.showLoading=!1})}}]})},getOilRecordById:function(){var t=this;this.showLoading=!0,this.$http.get("/store/json/refuel_pos/getRefuelMonitorRecordMsg",{"gasStationSaleOrder.redisId":this.$route.query.id}).then(function(e){"success"===e.result&&(t.loadResult=!0,t.oilRecord=e.data),console.log(e),t.showLoading=!1}).catch(function(e){t.showLoading=!1,console.log(e)})}},components:{vheader:s.a,loading:i.a,confirm:n.a},filters:{substr:function(t){return t?t.substring(t.length-6,t.length):""}}}),c={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"page ivo"},[o("div",{staticClass:"invoice step2"},[o("vheader",{attrs:{title:t.topinfo.title,isShowHome:!0}}),t._v(" "),t._m(0),t._v(" "),o("div",{staticClass:"invoiceinfo"},[o("div",{staticClass:"info-right"},[o("ul",[o("li",[t._m(1),t._v(" "),o("div",{staticClass:"info-content"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.invoiceInfo.title,expression:"invoiceInfo.title"}],attrs:{type:"text",placeholder:"请输入公司名称"},domProps:{value:t.invoiceInfo.title},on:{input:function(e){e.target.composing||t.$set(t.invoiceInfo,"title",e.target.value)}}})])]),t._v(" "),o("li",[t._m(2),t._v(" "),o("div",{staticClass:"info-content"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.invoiceInfo.orgTaxNo,expression:"invoiceInfo.orgTaxNo"}],attrs:{type:"text",placeholder:"请输入纳税人识别号"},domProps:{value:t.invoiceInfo.orgTaxNo},on:{input:function(e){e.target.composing||t.$set(t.invoiceInfo,"orgTaxNo",e.target.value)}}})])]),t._v(" "),o("li",[o("div",{staticClass:"info-desc"},[t._v("电子邮箱")]),t._v(" "),o("div",{staticClass:"info-content"},[o("input",{ref:"email",attrs:{type:"text",placeholder:"请输入电子邮箱"}})])]),t._v(" "),o("li",[o("div",{staticClass:"info-desc"},[t._v("公司地址")]),t._v(" "),o("div",{staticClass:"info-content"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.invoiceInfo.companyAddress,expression:"invoiceInfo.companyAddress"}],attrs:{type:"text",placeholder:"请输入公司地址"},domProps:{value:t.invoiceInfo.companyAddress},on:{input:function(e){e.target.composing||t.$set(t.invoiceInfo,"companyAddress",e.target.value)}}})])]),t._v(" "),o("li",[o("div",{staticClass:"info-desc"},[t._v("电话")]),t._v(" "),o("div",{staticClass:"info-content"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.invoiceInfo.userPhone,expression:"invoiceInfo.userPhone"}],attrs:{type:"text",placeholder:"请输入电话"},domProps:{value:t.invoiceInfo.userPhone},on:{input:function(e){e.target.composing||t.$set(t.invoiceInfo,"userPhone",e.target.value)}}})])]),t._v(" "),o("li",[o("div",{staticClass:"info-desc"},[t._v("开户银行")]),t._v(" "),o("div",{staticClass:"info-content"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.invoiceInfo.openingBank,expression:"invoiceInfo.openingBank"}],attrs:{type:"text",placeholder:"请输入开户银行"},domProps:{value:t.invoiceInfo.openingBank},on:{input:function(e){e.target.composing||t.$set(t.invoiceInfo,"openingBank",e.target.value)}}})])]),t._v(" "),o("li",[o("div",{staticClass:"info-desc"},[t._v("开户账户")]),t._v(" "),o("div",{staticClass:"info-content"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.invoiceInfo.bankAccount,expression:"invoiceInfo.bankAccount"}],attrs:{type:"text",placeholder:"请输入开户账户"},domProps:{value:t.invoiceInfo.bankAccount},on:{input:function(e){e.target.composing||t.$set(t.invoiceInfo,"bankAccount",e.target.value)}}})])])])]),t._v(" "),o("div",{staticClass:"buttonSc"},[o("yd-button",{staticClass:"save-submit",attrs:{type:"danger"},nativeOn:{click:function(e){return t.editSan(e)}}},[t._v("修改发票抬头")])],1),t._v(" "),o("div",{staticClass:"clear"})]),t._v(" "),o("confirm",{attrs:{title:"识别发票信息","confirm-text":"确定","cancel-text":"取消"},on:{"on-cancel":t.cancelConfirmDz,"on-confirm":t.disInvoice},model:{value:t.showConfirm2,callback:function(e){t.showConfirm2=e},expression:"showConfirm2"}}),t._v(" "),o("loading",{attrs:{show:t.showLoading}})],1),t._v(" "),o("footer",{staticClass:"btn-fixed-bottom"},[o("router-link",{attrs:{to:"/orderv2/selectOrder"}},[o("yd-button",{staticClass:"save-submit",attrs:{size:"large",type:"danger"}},[t._v("继续收银")])],1),t._v(" "),o("yd-button",{staticClass:"save-submit",attrs:{size:"large",type:"danger"},nativeOn:{click:function(e){return t.printInvoice(e)}}},[t._v("纸质发票")])],1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"step"},[i("ul",[i("li",{staticClass:"selected"},[t._v("1.加油记录")]),t._v(" "),i("li",[i("img",{attrs:{src:o("rW3a"),width:"15",height:"15"}})]),t._v(" "),i("li",{staticClass:"selected"},[t._v("2.收银结算")]),t._v(" "),i("li",[i("img",{attrs:{src:o("rW3a"),width:"15",height:"15"}})]),t._v(" "),i("li",{staticClass:"selected"},[t._v("3.客户识别")]),t._v(" "),i("li",[i("img",{attrs:{src:o("rW3a"),width:"15",height:"15"}})]),t._v(" "),i("li",{staticClass:"selected"},[t._v("4.开具发票")]),t._v(" "),i("div",{staticClass:"clear"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"info-desc"},[e("span",{staticStyle:{color:"#f30"}},[this._v("*")]),this._v("公司名称")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"info-desc"},[e("span",{staticStyle:{color:"#f30"}},[this._v("*")]),this._v("纳税人识别号")])}]};var r=o("VU/8")(a,c,!1,function(t){o("I4F6")},null,null);e.default=r.exports}});