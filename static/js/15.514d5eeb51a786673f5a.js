webpackJsonp([15],{"++jp":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Mitt"),n=s("Bfwr"),i=(a.a,n.a,{data:function(){return{topinfo:{title:"地罐交接-开始卸油"},ActivedTank:1,qfswitch:!0,tzfy:!1,wy:!1,dgrl:!1,tankList:[],showLoading:!1,mblnr:"",sheetID:"",show1:!1,sealEmpty:"",sealDepot:""}},created:function(){this.mblnr=this.$route.query.mblnr,this.sheetID=this.$route.query.id,this.queryTankListBySheetID()},methods:{selectedTank:function(t){this.ActivedTank=t},queryTankListBySheetID:function(){var t=this;this.showLoading=!0,this.$http.get("/store/json/delivery_sheet/querySheetTankAndUnloadBySheetID",{sheetID:this.$route.query.id}).then(function(e){"success"===e.result&&(t.tankList=e.data,t.tankList.forEach(function(t){var e=t.endOilVol/(t.endOilVol+t.endWaterVol+t.endEmpVol)*100;t.tankHeight=e+"%"}),t.refreshTankData()),t.showLoading=!1}).catch(function(e){t.showLoading=!1,console.log(e)})},showForm:function(){this.$router.push({path:"/receiveoil/purchase",query:{mblnr:this.mblnr,sheetID:this.sheetID}})},submitOrder:function(){var t=this,e=this.$route.query.id,s=this.$refs.sealEmpty.value,a=this.$refs.sealDepot.value;s?a?this.$dialog.confirm({title:'<div style="text-align:center;color: #333;font-size: 18px;">提示</div>',mes:'<div style="text-align: center;">确定要完成单据验收吗？</div>',opts:[{txt:"取消",color:!1,callback:function(){t.show1=!1}},{txt:"确定",color:!0,callback:function(){t.showLoading=!0,t.$http.get("/store/json/delivery_sheet/endSheetUnload",{"refuelUnloadSheet.sheetID":e,"refuelUnloadSheet.sealEmpty":s,"refuelUnloadSheet.sealDepot":a}).then(function(e){"success"===e.result?t.$dialog.alert({mes:"验收成功",callback:function(){t.show1=!1,t.$router.push("/indexV2")}}):t.$dialog.alert({mes:null===e.info?"网络异常,请稍后再试...":e.info,callback:function(){t.show1=!1}}),console.log(e),t.showLoading=!1}).catch(function(e){console.log(e),t.showLoading=!1})}}]}):this.$dialog.toast({mes:"请输入出库铅封",timeout:1500}):this.$dialog.toast({mes:"请输入回空铅封",timeout:1500})},refreshTankData:function(){var t=this,e=this.$route.query.id;setTimeout(function(){t.$http.get("/store/json/delivery_sheet/queryUnloadingTankBySheetID",{sheetID:e}).then(function(e){"success"===e.result&&(e.data&&e.data.length>0&&(t.refreshTankData(),e.data.forEach(function(e){"2"===e.unloadEnd&&t.tankList.forEach(function(s,a){if(e.tankNo===s.tankNo){var n=e.endOilVol/(e.endOilVol+e.endWaterVol+e.endEmpVol)*100;e.tankHeight=n+"%",t.$set(t.tankList,a,e)}})})))}).catch(function(t){console.log(t)})},5e3)},close:function(){this.show1=!1}},components:{vheader:a.a,loading:n.a}}),l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page page1"},[s("div",{staticClass:"unoilconfirm receiveoil"},[s("vheader",{attrs:{title:t.topinfo.title,isUserInfo:!1,isShowHome:!0}}),t._v(" "),s("div",{staticClass:"bound-order-title"},[s("div",{staticClass:"order-no-txt"},[t._v("出库单号")]),t._v(" "),s("div",{staticClass:"order-no-value"},[t._v(t._s(t.mblnr))]),t._v(" "),s("div",{staticClass:"clear"})]),t._v(" "),t._l(t.tankList,function(e){return s("div",{staticClass:"oiltank-data"},[s("div",{staticClass:"tank-btns"},[s("yd-button",{staticClass:"tank-btn",attrs:{type:"danger"}},[t._v(t._s(e.tankNo)+"#油罐")]),t._v(" "),0==e.unloadEnd?s("router-link",{attrs:{to:{path:"/receiveoil/startunoil",query:{tankNo:e.tankNo,mblnr:t.mblnr,sheetID:t.sheetID,unloadEnd:e.unloadEnd}}}},[s("yd-button",{staticClass:"tank-btn activedTank",attrs:{type:"danger"}},[t._v("开始卸油")])],1):t._e(),t._v(" "),1==e.unloadEnd?s("router-link",{attrs:{to:{path:"/receiveoil/inspected",query:{tankNo:e.tankNo,mblnr:t.mblnr,sheetID:t.sheetID,unloadEnd:e.unloadEnd}}}},[s("yd-button",{staticClass:"tank-btn activedTank",staticStyle:{background:"#4ea0bf !important"},attrs:{type:"danger"}},[t._v("查看卸油")])],1):t._e(),t._v(" "),s("router-link",{attrs:{to:{path:"/receiveoil/inspected",query:{tankNo:e.tankNo,mblnr:t.mblnr,sheetID:t.sheetID,unloadEnd:e.unloadEnd}}}},[2==e.unloadEnd?s("yd-button",{staticClass:"tank-btn activedTank",staticStyle:{background:"#4ea0bf !important"},attrs:{type:"danger"}},[t._v("结束卸油")]):t._e()],1),t._v(" "),s("div",{staticClass:"clear"})],1),t._v(" "),s("div",{staticClass:"tank-content"},[s("div",{staticClass:"tank-content-left"},[s("span",{staticClass:"tank-oil-height",style:{height:e.tankHeight}})]),t._v(" "),s("div",{staticClass:"tank-content-right"},[s("ul",[s("li",[s("p",{staticClass:"content-txt"},[t._v("标准体积(L)")]),t._v(" "),s("p",{staticClass:"content-value"},[t._v(t._s(e.endOilNormalVol))]),t._v(" "),s("div",{staticClass:"clear"})]),t._v(" "),s("li",[s("p",{staticClass:"content-txt"},[t._v("净油体积(L)")]),t._v(" "),s("p",{staticClass:"content-value"},[t._v(t._s(e.endOilVol))]),t._v(" "),s("div",{staticClass:"clear"})]),t._v(" "),s("li",[s("p",{staticClass:"content-txt"},[t._v("空体积(L)")]),t._v(" "),s("p",{staticClass:"content-value"},[t._v(t._s(e.endEmpVol))]),t._v(" "),s("div",{staticClass:"clear"})]),t._v(" "),s("li",[s("p",{staticClass:"content-txt"},[t._v("平均温度(℃)")]),t._v(" "),s("p",{staticClass:"content-value"},[t._v(t._s(e.endTemp))]),t._v(" "),s("div",{staticClass:"clear"})]),t._v(" "),s("li",[s("p",{staticClass:"content-txt"},[t._v("水高(mm)")]),t._v(" "),s("p",{staticClass:"content-value"},[t._v(t._s(e.endWaterHeight))]),t._v(" "),s("div",{staticClass:"clear"})]),t._v(" "),s("li",[s("p",{staticClass:"content-txt valuered"},[t._v("已卸升数(L)")]),t._v(" "),s("p",{staticClass:"content-value valuered"},[t._v(t._s(null==e.unloadNormalVol?0:e.unloadNormalVol))]),t._v(" "),s("div",{staticClass:"clear"})]),t._v(" "),s("div",{staticClass:"clear"})])]),t._v(" "),s("div",{staticClass:"clear"})]),t._v(" "),s("div",{staticClass:"clear"})])}),t._v(" "),s("yd-popup",{staticClass:"showdlginputbox",attrs:{position:"center",width:"90%","close-on-masker":!1},model:{value:t.show1,callback:function(e){t.show1=e},expression:"show1"}},[s("yd-cell-group",[s("yd-cell-item",[s("span",{attrs:{slot:"left"},slot:"left"},[t._v("回空铅封：")]),t._v(" "),s("yd-input",{ref:"sealEmpty",attrs:{slot:"right",placeholder:"请输入回空铅封"},slot:"right",model:{value:t.sealEmpty,callback:function(e){t.sealEmpty=e},expression:"sealEmpty"}})],1),t._v(" "),s("yd-cell-item",[s("span",{attrs:{slot:"left"},slot:"left"},[t._v("出库铅封：")]),t._v(" "),s("yd-input",{ref:"sealDepot",attrs:{slot:"right",placeholder:"请输入出库铅封"},slot:"right",model:{value:t.sealDepot,callback:function(e){t.sealDepot=e},expression:"sealDepot"}})],1),t._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("yd-button",{staticStyle:{height:"40px","font-size":"18px",background:"#ff6800"},attrs:{type:"danger"},nativeOn:{click:function(e){return t.submitOrder(e)}}},[t._v("确定")]),t._v(" "),s("yd-button",{staticStyle:{height:"40px","font-size":"18px","margin-left":"10px"},attrs:{type:"primary"},nativeOn:{click:function(e){return t.close(e)}}},[t._v("取消")])],1)],1)],1)],2),t._v(" "),s("loading",{attrs:{show:t.showLoading,text:""}}),t._v(" "),s("footer",{staticClass:"btn-fixed-bottom"},[s("yd-button",{staticClass:"save-submit",attrs:{size:"large",type:"danger"},nativeOn:{click:function(e){return t.showForm(e)}}},[t._v("进货验收")])],1)],1)},staticRenderFns:[]};var o=s("VU/8")(i,l,!1,function(t){s("4V49")},null,null);e.default=o.exports},"4V49":function(t,e){}});